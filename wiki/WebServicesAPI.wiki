#summary Web Services API.
#labels Phase-Design,Phase-Implementation,Not-Implemented

= Web Services API =

== Important Considerations ==

 # All strings between [] are variables.
 # All returns are JSON.
 # The default return is an associative array containing the error code and msg. If the error code is equal to 0 (zero) there is no errors.
 # Arguments marked with `*` are optional.
 
== Concepts ==

 * Method
 * Instanced Object
 * Collection (list of instanced objects)

A string followed by / (slash) in an URL represents object members (method or object) and followed by . (dot) represents collection members.

ie:

 * *modify* is a method of an instanced object scanner:
{{{
/scanner/[name]/modify
}}}

 * *add* is a method of the collection of scanners:
{{{
/scanner.add
}}}

== Services ==

=== Scanner ===

{{{
Action: Show all configured scanners.
URL: /scanner
Args: None
Method: GET, POST
Returns: Collection containing all scanner objects.
}}}

{{{
Action: Add a new scanner to the list.
URL: /scanner.add
Args: name, localization*, description*, manufactor, model, papersize*, isindexable*, user*, group*
Method: POST
Returns: Scanner object.
}}}

{{{
Action: Get a scanner object using the name.
URL: /scanner/[name]
Args: None
Method: GET, POST
Returns: Scanner object.
}}}

{{{
Action: Modify a scanner configuration.
URL: /scanner/[name]/modify
Args: name*, localization*, description*, manufactor*, model*, papersize*, isindexable*, user, group
Method: POST
Returns: Scanner object.
}}}

{{{
Action: Removes a scanner.
URL: /scanner/[name]/delete
Args: None
Method: DELETE
Returns: Default
}}}

{{{
Action: Get the scanner status code (See: WikiScannerStatusCode).
URL: /scanner/[name]/status
Args: None
Method: GET, POST
Returns: Default
}}}

{{{
Action: Scan a page.
URL: /scanner/[name]/scan
Args: None
Method: GET, POST
Return: Page object.
}}}

=== User ===

{{{
Action: List all registered users.
URL: /user
Args: None
Method: GET, POST
Returns: Collection containing all user objects.
}}}

{{{
Action: Add a new user.
URL: /user.add
Args: username, password, role
Method: POST
Returns: User object.
}}}

{{{
Action: Get an user object using the username.
URL: /user/[username]
Args: None
Method: GET, POST
Returns: User object.
}}}

{{{
Action: Modify an user registry.
URL: /user/[username]/modify
Args: username*, password*, role*
Method: POST
Returns: User object.
}}}

{{{
Action: Deletes an user.
URL: /user/[username]/delete
Args: None
Method: DELETE
Returns: Default
}}}

{{{
Action: List all the scanned (and not used) pages.
URL: /user/[username]/pages
Args: None
Method: GET, POST
Returns: Collection of page objects.
}}}

{{{
Action: List all the generated documents.
URL: /user/[username]/document
Args: None
Method: GET, POST
Return: Collection of document objects.
}}}

{{{
Action: Create a new document using the selected pages.
URL: /user/[username]/document.create
Args: docname, docdescript, pages (list of page ids)
Method: GET, POST
Return: Document object.
}}}

{{{
Action: Download a document using the docname.
URL: /user/[username]/document/[docname]
Args: None
Method: GET, POST
Return: Downloadable PDF document.
}}}

=== Auth ===

{{{
Action: Authenticate an user.
URL: /auth/signin
Args: username, password
Method: POST
Returns: Default
}}}

{{{
Action: Sign out an user. 
URL: /auth/signout
Args: None
Method: GET, POST
Returns: Default
}}}